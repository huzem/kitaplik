<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hitit √úniversitesi | Akademik Yayƒ±n Portalƒ±</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --hitit-bordo: #7a0026;
            --hitit-bordo-light: #9e0031;
            --bg-workspace: #1e1e1e;
            --bg-sidebar: #ffffff;
            --text-main: #2d3436;
            --border-color: #dfe6e9;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
            height: 100vh;
            display: flex;
            flex-direction: column;
            color: var(--text-main);
            overflow: hidden;
        }

        /* üîê AKADEMƒ∞K Gƒ∞Rƒ∞≈û PORTALI */
        #login-overlay {
            position: fixed; inset: 0; background: linear-gradient(135deg, var(--hitit-bordo) 0%, #4d0018 100%);
            display: flex; justify-content: center; align-items: center; z-index: 2000;
        }
        .login-card {
            background: white; padding: 50px; border-radius: 2px; /* Keskin k√∂≈üeler daha kurumsal durur */
            text-align: center; width: 400px; box-shadow: 0 30px 60px rgba(0,0,0,0.5);
        }
        .login-card img { width: 160px; margin-bottom: 30px; }
        .login-card h2 { font-weight: 300; letter-spacing: 1px; margin-bottom: 20px; color: var(--hitit-bordo); }
        .login-card input {
            width: 100%; padding: 12px; margin-bottom: 20px;
            border: 1px solid #ddd; border-radius: 0; font-size: 14px; outline: none;
        }
        .login-card button {
            width: 100%; padding: 12px; background: var(--hitit-bordo);
            color: white; border: none; cursor: pointer; font-size: 14px; font-weight: 600; transition: 0.3s;
        }
        .login-card button:hover { background: #000; }

        /* üè† √úST NAVƒ∞GASYON */
        header {
            background: white; height: 65px; display: flex; align-items: center;
            justify-content: space-between; padding: 0 30px; border-bottom: 1px solid var(--border-color);
            z-index: 100; flex-shrink: 0;
        }
        .logo-area { display: flex; align-items: center; gap: 20px; }
        .logo-area img { height: 45px; }
        .logo-area div h1 { font-size: 16px; font-weight: 700; color: var(--hitit-bordo); line-height: 1; }
        .logo-area div p { font-size: 11px; text-transform: uppercase; color: #636e72; margin-top: 4px; letter-spacing: 1px; }

        /* üè† ANA D√úZEN */
        .main-layout { display: flex; flex: 1; overflow: hidden; }

        /* üìÇ SOL MEN√ú (AKADEMƒ∞K Lƒ∞STE) */
        .sidebar {
            width: 320px; background: var(--bg-sidebar); border-right: 1px solid var(--border-color);
            display: flex; flex-direction: column; padding: 0; overflow-y: auto;
        }
        .sidebar-header { padding: 25px; border-bottom: 1px solid var(--border-color); }
        .sidebar-header h2 { font-size: 14px; font-weight: 800; color: #b2bec3; letter-spacing: 1px; }
        
        .module-item {
            padding: 18px 25px; border-bottom: 1px solid #f1f2f6; cursor: pointer;
            transition: all 0.2s; display: flex; align-items: center; gap: 15px; color: #2d3436;
        }
        .module-item:hover { background: #f9f9f9; padding-left: 30px; }
        .module-item.active { background: #fff4f7; border-left: 4px solid var(--hitit-bordo); color: var(--hitit-bordo); font-weight: 600; }
        .module-item i { font-size: 18px; opacity: 0.5; }

        /* üìñ √áALI≈ûMA ALANI */
        .workspace {
            flex: 1; display: flex; flex-direction: column; background: var(--bg-workspace); position: relative;
        }

        /* üü¢ PDF Vƒ∞EWER AREA */
        #viewport {
            flex: 1; display: flex; justify-content: center; align-items: center;
            padding: 30px; overflow: auto; position: relative; scroll-behavior: smooth;
        }
        .spread-container {
            display: flex; gap: 4px; padding: 5px;
            transform-origin: center center;
            transition: transform 0.2s ease-out;
        }
        canvas {
            max-width: 48vw; height: auto; max-height: 85vh; background: white;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        canvas.cover { max-width: 100%; }

        /* üïπÔ∏è PROFESYONEL KONTROL PANELƒ∞ */
        .action-bar {
            height: 75px; background: rgba(255, 255, 255, 0.95); display: flex;
            justify-content: space-between; align-items: center; padding: 0 40px; 
            border-top: 1px solid var(--border-color); backdrop-filter: blur(10px);
        }
        .group { display: flex; align-items: center; gap: 12px; }
        
        .btn {
            background: #f1f2f6; color: var(--text-main); border: none;
            padding: 10px 16px; border-radius: 4px; cursor: pointer; display: flex;
            align-items: center; gap: 8px; transition: 0.2s; font-size: 13px; font-weight: 600;
        }
        .btn:hover { background: #dfe6e9; }
        .btn.primary { background: var(--hitit-bordo); color: white; }
        .btn.primary:hover { background: #000; }
        .btn:disabled { opacity: 0.2; cursor: not-allowed; }

        .page-indicator { font-size: 13px; font-weight: 700; color: var(--hitit-bordo); min-width: 100px; text-align: center; }

        #loader { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center; z-index: 10; display: none; }
        .spin { border: 3px solid rgba(255,255,255,0.1); border-top: 3px solid var(--hitit-bordo); border-radius: 50%; width: 40px; height: 40px; animation: load 0.8s linear infinite; margin-bottom: 10px; }
        @keyframes load { 100% { transform: rotate(360deg); } }

        /* Tam Ekran Modu */
        body.fullscreen-mode header, body.fullscreen-mode .sidebar { display: none; }
    </style>
</head>
<body oncontextmenu="return false">

    <div id="login-overlay">
        <div class="login-card">
            <img src="https://hitit.edu.tr/images/HititLogoYeni.svg">
            <h2>Dƒ∞Jƒ∞TAL PORTAL</h2>
            <input type="password" id="passKey" placeholder="Eri≈üim Anahtarƒ±">
            <button onclick="login()">Sƒ∞STEME Gƒ∞Rƒ∞≈û YAP</button>
        </div>
    </div>

    <header>
        <div class="logo-area">
            <img src="https://hitit.edu.tr/images/HititLogoYeni.svg">
            <div>
                <h1>Hƒ∞Tƒ∞T √úNƒ∞VERSƒ∞TESƒ∞</h1>
                <p>HUZEM Kitaplƒ±ƒüƒ±</p>
            </div>
        </div>
        <div id="active-doc" style="font-size: 12px; font-weight: 600; color: #b2bec3;">Belge Se√ßiniz</div>
    </header>

    <div class="main-layout">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>Yayƒ±n Kataloƒüu</h2>
            </div>
            <div id="catalog"></div>
        </div>

        <div class="workspace" id="viewer">
            <div id="viewport">
                <div id="loader">
                    <div class="spin"></div>
                    <p style="font-size: 12px;">D√∂k√ºman ƒ∞≈üleniyor...</p>
                </div>
                <div class="spread-container" id="spread">
                    <canvas id="left-pg"></canvas>
                    <canvas id="right-pg"></canvas>
                </div>
            </div>

            <div class="action-bar">
                <div class="group">
                    <button class="btn" onclick="prev()"><i class="fas fa-arrow-left"></i> √ñNCEKƒ∞</button>
                    <div class="page-indicator" id="pgInfo">0 / 0</div>
                    <button class="btn" onclick="next()">SONRAKƒ∞ <i class="fas fa-arrow-right"></i></button>
                </div>

                <div class="group" style="background: #f1f2f6; padding: 5px; border-radius: 6px;">
                    <button class="btn" style="padding: 8px;" onclick="zoom(-0.2)"><i class="fas fa-minus"></i></button>
                    <span id="zoomVal" style="font-size: 12px; font-weight: 800; width: 50px; text-align: center;">100%</span>
                    <button class="btn" style="padding: 8px;" onclick="zoom(0.2)"><i class="fas fa-plus"></i></button>
                </div>

                <div class="group">
                    <button class="btn primary" onclick="toggleFull()"><i class="fas fa-expand"></i> TAM EKRAN</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const AUTH_KEY = "hitit2026";
        let pdf = null, idx = 1, currentZoom = 1.0, isRendering = false;

        if(sessionStorage.getItem("hitit_verified") === "true") document.getElementById("login-overlay").style.display="none";
        
        function login() {
            if(document.getElementById("passKey").value === AUTH_KEY) {
                sessionStorage.setItem("hitit_verified", "true");
                document.getElementById("login-overlay").style.display="none";
            } else { alert("Ge√ßersiz Anahtar."); }
        }

        const docs = [
            { title: "Mod√ºl 1: √ñl√ßme ve Deƒüerlendirmede Temel Kavramlar", file: "olcme_modul1.pdf" },
            { title: "Mod√ºl 2: Yeterlilik ve Performans Temelli √ñl√ßme- Deƒüerlendirmeye Giri≈ü", file: "olcme_modul2.pdf" },
            { title: "Mod√ºl 3: Yeterlilik Temelli √ñl√ßme-Deƒüerlendirme Y√∂ntemleri, Stratejileri ve Puanlama Ara√ßlarƒ±", file: "olcme_modul3.pdf" },
            { title: "Mod√ºl 4: Performans Deƒüerlendirmede Etkili ve Nitelikli Geribildirim Verme Rehberi", file: "olcme_modul4.pdf" },
            { title: "Mod√ºl 5: Eƒüitici Eƒüitimleri Sonucunda Birimlerden Gelen Uygulama √ñrnekleri", file: "olcme_modul5.pdf" },

        ];

        const catalog = document.getElementById("catalog");
        docs.forEach(d => {
            const div = document.createElement("div");
            div.className = "module-item";
            div.innerHTML = `<i class="fas fa-file-invoice"></i> ${d.title}`;
            div.onclick = () => loadDoc(d.file, d.title, div);
            catalog.appendChild(div);
        });

        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        async function loadDoc(url, title, el) {
            document.querySelectorAll(".module-item").forEach(m => m.classList.remove("active"));
            el.classList.add("active");
            document.getElementById("active-doc").textContent = title.toUpperCase();
            document.getElementById("loader").style.display = "block";
            currentZoom = 1.0; applyZoom();

            try {
                pdf = await pdfjsLib.getDocument(url).promise;
                idx = 1;
                render();
            } catch (e) {
                alert("D√∂k√ºman y√ºklenemedi.");
                document.getElementById("loader").style.display = "none";
            }
        }

        async function draw(num, id) {
            const canvas = document.getElementById(id);
            if (!num || num > pdf.numPages) { canvas.style.display = "none"; return; }
            canvas.style.display = "block";
            const page = await pdf.getPage(num);
            const dpr = window.devicePixelRatio || 1;
            const viewport = page.getViewport({ scale: 2.2 }); // Y√ºksek kalite sabit render
            const ctx = canvas.getContext("2d");
            canvas.height = viewport.height * dpr;
            canvas.width = viewport.width * dpr;
            ctx.scale(dpr, dpr);
            await page.render({ canvasContext: ctx, viewport }).promise;
        }

        async function render() {
            if (isRendering) return;
            isRendering = true;
            document.getElementById("loader").style.display = "block";

            const L = document.getElementById("left-pg"), R = document.getElementById("right-pg");

            if (idx === 1) {
                L.style.display = "none";
                await draw(1, "right-pg");
                R.className = "cover";
                document.getElementById("pgInfo").textContent = `KAPAK / ${pdf.numPages}`;
            } else {
                R.className = "";
                await draw(idx, "left-pg");
                await draw(idx + 1, "right-pg");
                const end = Math.min(idx + 1, pdf.numPages);
                document.getElementById("pgInfo").textContent = `${idx}-${end} / ${pdf.numPages}`;
            }

            document.getElementById("loader").style.display = "none";
            isRendering = false;
        }

        function zoom(val) { currentZoom = Math.min(Math.max(0.6, currentZoom + val), 2.5); applyZoom(); }
        function applyZoom() { 
            document.getElementById("spread").style.transform = `scale(${currentZoom})`; 
            document.getElementById("zoomVal").textContent = Math.round(currentZoom * 100) + "%";
        }
        function next() { if (idx === 1) idx = 2; else idx += 2; if(idx <= pdf.numPages) render(); }
        function prev() { if (idx === 2) idx = 1; else idx -= 2; if(idx >= 1) render(); }
        function toggleFull() { 
            const v = document.getElementById("viewer");
            if (!document.fullscreenElement) { v.requestFullscreen(); document.body.classList.add("fullscreen-mode"); }
            else { document.exitFullscreen(); document.body.classList.remove("fullscreen-mode"); }
        }
    </script>
</body>
</html>

